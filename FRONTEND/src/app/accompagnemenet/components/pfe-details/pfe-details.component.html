<app-navbar></app-navbar>

<div class="container mt-5" *ngIf="selectedProject">
  <div class="card border-0 shadow-lg overflow-hidden">
    <div class="card-header bg-primary-gradient py-4">
      <div class="d-flex justify-content-between align-items-center">
        <h1 class="h2 text-white mb-0">{{ selectedProject.title }}</h1>
        <span
          class="badge fs-6 fw-normal"
          [ngClass]="{
            'bg-warning-light text-warning-dark': selectedProject.stage === 'PROPOSAL',
            'bg-info-light text-info-dark': selectedProject.stage === 'IN_PROGRESS',
            'bg-success-light text-success-dark': selectedProject.stage === 'COMPLETED'
          }"
        >
          <i class="fas me-2"
             [ngClass]="{
               'fa-clock': selectedProject.stage === 'PROPOSAL',
               'fa-cog': selectedProject.stage === 'IN_PROGRESS',
               'fa-check-circle': selectedProject.stage === 'COMPLETED'
             }"
          ></i>
          {{ selectedProject.stage | titlecase }}
        </span>
      </div>
    </div>

    <div class="card-body p-4">
      <div class="row g-4">
        <!-- Colonne gauche -->
        <div class="col-lg-6">
          <div class="d-flex flex-column gap-3">
            <div class="info-card">
              <h5 class="text-primary mb-3"><i class="fas fa-file-alt me-2"></i>Description</h5>
              <p class="text-muted mb-0">{{ selectedProject.description }}</p>
            </div>
            <div class="info-card">
              <h5 class="text-primary mb-3"><i class="fas fa-user me-2"></i>Porteur de Projet</h5>
              <p class="text-muted mb-0">{{ selectedProject.mentorId }}</p>
            </div>
            <div class="info-card">
              <h5 class="text-primary mb-3"><i class="fas fa-users me-2"></i>Étudiants</h5>
              <p class="text-muted mb-0">
                  {{ selectedProject.studentIds.join(', ') }}
                <ng-template #noStudents>Aucun étudiant</ng-template>
              </p>
            </div>
          </div>
        </div>

        <!-- Colonne droite -->
        <div class="col-lg-6">
          <div class="d-flex flex-column gap-3">
            <div class="info-card">
              <h5 class="text-primary mb-3"><i class="fas fa-tasks me-2"></i>Statut</h5>
              <p class="text-muted mb-0">{{ selectedProject.stage | titlecase }}</p>
            </div>
            <div class="info-card">
              <h5 class="text-primary mb-3"><i class="fas fa-comments me-2"></i>Commentaires</h5>
                  <ul class="list-unstyled">
                    <li *ngFor="let comment of selectedProject.comments">
                      {{ comment.content }} - <em>{{ comment.username }}</em>
                    </li>
                  </ul>
                <ng-template #noComments>Aucun commentaire</ng-template>
            </div>
           
          </div>
        </div>
      </div>

      <!-- Section Évaluation -->
      <div class="mt-4">
        <div class="info-card">
          <h5 class="text-primary mb-3"><i class="fas fa-star me-2"></i>Évaluation</h5>
          <p class="text-muted mb-0">
            {{ selectedProject.evaluation?.note || 'Aucune évaluation disponible' }}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Message si aucun projet chargé -->
<div class="container mt-5" *ngIf="!selectedProject">
  <div class="alert alert-warning">
    Aucun projet sélectionné.
  </div>
</div>
