<app-navbar></app-navbar>
<div class="section-py landing-hero position-relative" >
<br /><br /><br />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<div class="container-fluid mt-4 position-relative rounded-4 shadow-lg overflow-hidden" style="background: linear-gradient(135deg, #f7f6f7, #f3f2f5);">
  
  <div class="container position-relative py-5">
    <!-- Hero Section -->
  <div class="hero-section position-relative overflow-hidden rounded-4 mb-5 shadow-lg" style="background: linear-gradient(135deg, #f0f4ff, #d4e2ff);">
    <div class="position-absolute w-100 h-100" style="background: radial-gradient(circle at top left, rgba(255,255,255,0.3), rgba(0,123,255,0.1)); opacity: 0.2;"></div>
    <div class="container position-relative py-9">
      <div class="row align-items-center">
        <div class="col-md-8">
          <h1 class="display-4 fw-bold text-primary mb-3" style="text-shadow: 1px 1px 3px rgba(0,0,0,0.1);">
            ðŸš€ Gestion des Projets PFE
          </h1>
          <p class="lead text-dark mb-4" style="font-weight: 500; letter-spacing: 0.4px; font-size: 1.2rem;">
            Planifiez, organisez et suivez vos projets en toute simplicitÃ©.
          </p>
         
        </div>
      </div>
    </div>
  </div>
    <div class="row justify-content-center">
      <div class="col-xl-12 col-lg-12">
        <div class="card shadow-lg p-4 border-0 rounded-4" style="background-color: rgba(255, 255, 255, 0.95);">
          
          <div class="d-flex justify-content-between align-items-center mb-4">
            <button class="btn btn-gradient btn-lg rounded-pill shadow-sm" data-bs-toggle="offcanvas" data-bs-target="#offcanvasAddProject">
              <i class="bx bx-plus icon-sm"></i> <span class="d-none d-sm-inline-block">Ajouter ProjetPFE</span>
            </button>
          </div>

          <h4 class="text-center text-gradient mb-4 fw-semibold">ðŸ“‹ Liste des Sujets</h4>

          <div class="table-responsive rounded-4 overflow-hidden">
            <table class="table table-hover table-bordered text-center align-middle">
              <thead class="table-dark text-light">
                <tr>
                  <th class="text-truncate">SujetPFE</th>
                  <th class="text-truncate">Porteur de Projet</th>
                  <th class="text-truncate">Statut</th>
                  <th class="text-truncate">Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let projet of projets">
                  <td class="fw-bold text-primary">{{ projet.title }}</td>
                  <td>{{ projet.mentorId }}</td>
                  <td>{{ projet.stage }}</td>
                  <td>
                    <button class="btn btn-info btn-sm me-1" (click)="viewDetails(projet.id!)">DÃ©tails</button>
                    <button class="btn btn-warning btn-sm me-1" (click)="editProject(projet)">Modifier</button>
                    <button class="btn btn-danger btn-sm" (click)="deleteProject(projet.id!)">Supprimer</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<!-- Offcanvas - Ajouter Projet -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasAddProject">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title text-dark">ðŸŽ¯ Nouveau Projet</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <form (ngSubmit)="createProject()">
      <div class="mb-3">
        <label for="title" class="form-label">Titre</label>
        <input type="text" id="title" class="form-control" [(ngModel)]="newProject.title" name="title" required />
        <br>
        <a routerLink="/student" class="btn btn-outline-dark rounded-pill">
          <i class="bx bx-group icon-sm"></i> <span class="d-none d-sm-inline-block">GÃ©nÃ©rer SujetPFE</span>
        </a>
      </div>

      <div class="mb-3">
        <label for="description" class="form-label">Description</label>
        <textarea id="description" class="form-control" [(ngModel)]="newProject.description" name="description" required></textarea>
      </div>

      <div class="mb-3">
        <label for="mentorId" class="form-label">Mentor (ID)</label>
        <input type="text" id="mentorId" class="form-control" [(ngModel)]="newProject.mentorId" name="mentorId" required />
      </div>

      <div class="mb-3">
        <label for="students" class="form-label">Ã‰tudiants (IDs sÃ©parÃ©s par des virgules)</label>
        <input
          type="text"
          id="students"
          class="form-control"
          [ngModel]="newProject.studentIds.join(', ')"
          (ngModelChange)="onStudentIdsChange($event)"
          name="students"
        />
      </div>

      <div class="mb-4">
        <label for="stage" class="form-label">Statut</label>
        <select class="form-select" [(ngModel)]="newProject.stage" name="stage" id="stage">
          <option value="PROPOSAL">Proposition</option>
          <option value="VALIDATED">ValidÃ©</option>
          <option value="DEVELOPMENT">DÃ©veloppement</option>
          <option value="DEFENSE">Soutenance</option>
        </select>
      </div>

      <button type="submit" class="btn btn-gradient w-100 rounded-pill">âœ… CrÃ©er le Projet</button>
    </form>
  </div>
</div>
</div>
