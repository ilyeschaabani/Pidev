<app-navbar></app-navbar>
<br><br><br>

<div class="prediction-container">
  <mat-card class="prediction-card">
    <mat-card-header>
      <mat-card-title class="title">üîÆ Pr√©dire le co√ªt du projet</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <!-- Message d'erreur -->
      <div *ngIf="validationError" class="error-message">
        {{ validationError }}
      </div>

      <!-- GIF de chargement -->
      <div *ngIf="loading" class="loading-gif">
        <img src="https://i.gifer.com/ZKZg.gif" alt="Chargement..." />
      </div>

      <form class="prediction-form" (ngSubmit)="envoyerPrediction()">
        <div class="form-row">

          <!-- Section Projet -->
          <div class="form-group">
            <mat-form-field appearance="outline">
              <mat-label>Nom du projet</mat-label>
              <input matInput [(ngModel)]="inputData['Project Name']" name="projectName" required>
            </mat-form-field>
<mat-form-field appearance="outline">
  <mat-label>Type de projet</mat-label>
  <mat-select [(ngModel)]="inputData['Project Type']" name="projectType" required>
    <mat-option *ngFor="let type of projectTypes" [value]="type">{{ type }}</mat-option>
  </mat-select>
</mat-form-field>


            <mat-form-field appearance="outline">
              <mat-label>Localisation</mat-label>
              <input matInput [(ngModel)]="inputData['Location']" name="location" required>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Statut du projet</mat-label>
              <input matInput [(ngModel)]="inputData['Project Status']" name="projectStatus" required>
            </mat-form-field>
          </div>

          <!-- Section T√¢che -->
          <div class="form-group">
            <mat-form-field appearance="outline">
              <mat-label>ID T√¢che</mat-label>
              <input matInput [(ngModel)]="inputData['Task ID']" name="taskId" required>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Nom de la t√¢che</mat-label>
              <input matInput [(ngModel)]="inputData['Task Name']" name="taskName" required>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Statut de la t√¢che</mat-label>
              <input matInput [(ngModel)]="inputData['Task Status']" name="taskStatus" required>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Assign√© √†</mat-label>
              <input matInput [(ngModel)]="inputData['Assigned To']" name="assignedTo" required>
            </mat-form-field>
          </div>

          <!-- Section M√©triques -->
          <div class="form-group">
            <mat-form-field appearance="outline">
              <mat-label>Heures pass√©es</mat-label>
              <input matInput type="number" [(ngModel)]="inputData['Hours Spent']" name="hoursSpent" required>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Budget</mat-label>
              <input matInput type="number" [(ngModel)]="inputData['Budget']" name="budget" required>
              <span matSuffix>DT</span>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Progression</mat-label>
              <input matInput type="number" [(ngModel)]="inputData['Progress']" name="progress" required>
              <span matSuffix>%</span>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Priorit√©</mat-label>
              <input matInput [(ngModel)]="inputData['Priority']" name="priority" required>
            </mat-form-field>
          </div>

          <!-- Section Dates -->
          <div class="form-group">
            <mat-form-field appearance="outline">
              <mat-label>Date de d√©but</mat-label>
              <input matInput type="date" [(ngModel)]="inputData['Start Date']" name="startDate" required>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Date de fin</mat-label>
              <input matInput type="date" [(ngModel)]="inputData['End Date']" name="endDate" required>
            </mat-form-field>
          </div>
        </div>

        <div class="button-container">
          <button mat-raised-button color="primary" type="submit" class="submit-button" [disabled]="loading">
            <mat-icon>calculate</mat-icon>
            üìä Pr√©dire
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
<div class="chat-box">
  <div class="chat-message user">
    <p>Donne-moi le co√ªt estim√© du projet üôè</p>
  </div>
  <div class="chat-message bot" *ngIf="predictionResult !== null">
    <p>üîÆ Estimation : <strong>{{ predictionResult | currency:'EUR' }}</strong></p>
    <p>{{ explication }}</p>
  </div>
</div>



